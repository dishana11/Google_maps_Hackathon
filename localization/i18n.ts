import { I18n } from 'i18n-js';
import * as Localization from 'expo-localization';
import { StorageService } from '../services/StorageService';

// Define helper functions first before they are used
export const getSupportedLanguageCodes = () => [
  'en', 'es', 'fr', 'de', 'it', 'pt', 'ru', 'zh', 'ja', 'ko', 'ar', 'hi', 'th', 'vi', 'tr', 'pl', 'nl', 'sv', 'da', 'no', 'fi', 'he', 'cs', 'sk', 'hu', 'ro', 'bg', 'hr', 'sr', 'sl', 'et', 'lv', 'lt', 'uk', 'be', 'mk', 'sq', 'mt', 'is', 'ga', 'cy', 'eu', 'ca', 'gl', 'fa', 'ur', 'bn', 'ta', 'te', 'ml', 'kn', 'gu', 'pa', 'or', 'as', 'mr', 'ne', 'si', 'my', 'km', 'lo', 'ka', 'hy', 'az', 'kk', 'ky', 'uz', 'tg', 'mn', 'bo', 'dz', 'am', 'ti', 'om', 'so', 'sw', 'zu', 'xh', 'af', 'st', 'tn', 'ss', 've', 'ts', 'nr', 'nso', 'mg', 'ny', 'sn', 'rw', 'rn', 'lg', 'wo', 'yo', 'ig', 'ha', 'ff', 'bm'
];

export const getSupportedLanguages = () => [
  { code: 'en', name: 'English', nativeName: 'English' },
  { code: 'es', name: 'Spanish', nativeName: 'EspaÃ±ol' },
  { code: 'fr', name: 'French', nativeName: 'FranÃ§ais' },
  { code: 'de', name: 'German', nativeName: 'Deutsch' },
  { code: 'it', name: 'Italian', nativeName: 'Italiano' },
  { code: 'pt', name: 'Portuguese', nativeName: 'PortuguÃªs' },
  { code: 'ru', name: 'Russian', nativeName: 'Ð ÑƒÑÑÐºÐ¸Ð¹' },
  { code: 'zh', name: 'Chinese', nativeName: 'ä¸­æ–‡' },
  { code: 'ja', name: 'Japanese', nativeName: 'æ—¥æœ¬èªž' },
  { code: 'ko', name: 'Korean', nativeName: 'í•œêµ­ì–´' },
  { code: 'ar', name: 'Arabic', nativeName: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' },
  { code: 'hi', name: 'Hindi', nativeName: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€' },
  { code: 'th', name: 'Thai', nativeName: 'à¹„à¸—à¸¢' },
  { code: 'vi', name: 'Vietnamese', nativeName: 'Tiáº¿ng Viá»‡t' },
  { code: 'tr', name: 'Turkish', nativeName: 'TÃ¼rkÃ§e' },
  { code: 'pl', name: 'Polish', nativeName: 'Polski' },
  { code: 'nl', name: 'Dutch', nativeName: 'Nederlands' },
  { code: 'sv', name: 'Swedish', nativeName: 'Svenska' },
  { code: 'da', name: 'Danish', nativeName: 'Dansk' },
  { code: 'no', name: 'Norwegian', nativeName: 'Norsk' },
  { code: 'fi', name: 'Finnish', nativeName: 'Suomi' },
  { code: 'he', name: 'Hebrew', nativeName: '×¢×‘×¨×™×ª' },
  { code: 'cs', name: 'Czech', nativeName: 'ÄŒeÅ¡tina' },
  { code: 'sk', name: 'Slovak', nativeName: 'SlovenÄina' },
  { code: 'hu', name: 'Hungarian', nativeName: 'Magyar' },
  { code: 'ro', name: 'Romanian', nativeName: 'RomÃ¢nÄƒ' },
  { code: 'bg', name: 'Bulgarian', nativeName: 'Ð‘ÑŠÐ»Ð³Ð°Ñ€ÑÐºÐ¸' },
  { code: 'hr', name: 'Croatian', nativeName: 'Hrvatski' },
  { code: 'sr', name: 'Serbian', nativeName: 'Ð¡Ñ€Ð¿ÑÐºÐ¸' },
  { code: 'sl', name: 'Slovenian', nativeName: 'SlovenÅ¡Äina' },
  { code: 'et', name: 'Estonian', nativeName: 'Eesti' },
  { code: 'lv', name: 'Latvian', nativeName: 'LatvieÅ¡u' },
  { code: 'lt', name: 'Lithuanian', nativeName: 'LietuviÅ³' },
  { code: 'uk', name: 'Ukrainian', nativeName: 'Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°' },
  { code: 'be', name: 'Belarusian', nativeName: 'Ð‘ÐµÐ»Ð°Ñ€ÑƒÑÐºÐ°Ñ' },
  { code: 'mk', name: 'Macedonian', nativeName: 'ÐœÐ°ÐºÐµÐ´Ð¾Ð½ÑÐºÐ¸' },
  { code: 'sq', name: 'Albanian', nativeName: 'Shqip' },
  { code: 'mt', name: 'Maltese', nativeName: 'Malti' },
  { code: 'is', name: 'Icelandic', nativeName: 'Ãslenska' },
  { code: 'ga', name: 'Irish', nativeName: 'Gaeilge' },
  { code: 'cy', name: 'Welsh', nativeName: 'Cymraeg' },
  { code: 'eu', name: 'Basque', nativeName: 'Euskera' },
  { code: 'ca', name: 'Catalan', nativeName: 'CatalÃ ' },
  { code: 'gl', name: 'Galician', nativeName: 'Galego' },
  { code: 'fa', name: 'Persian', nativeName: 'ÙØ§Ø±Ø³ÛŒ' },
  { code: 'ur', name: 'Urdu', nativeName: 'Ø§Ø±Ø¯Ùˆ' },
  { code: 'bn', name: 'Bengali', nativeName: 'à¦¬à¦¾à¦‚à¦²à¦¾' },
  { code: 'ta', name: 'Tamil', nativeName: 'à®¤à®®à®¿à®´à¯' },
  { code: 'te', name: 'Telugu', nativeName: 'à°¤à±†à°²à±à°—à±' },
  { code: 'ml', name: 'Malayalam', nativeName: 'à´®à´²à´¯à´¾à´³à´‚' },
  { code: 'kn', name: 'Kannada', nativeName: 'à²•à²¨à³à²¨à²¡' },
  { code: 'gu', name: 'Gujarati', nativeName: 'àª—à«àªœàª°àª¾àª¤à«€' },
  { code: 'pa', name: 'Punjabi', nativeName: 'à¨ªà©°à¨œà¨¾à¨¬à©€' },
  { code: 'or', name: 'Odia', nativeName: 'à¬“à¬¡à¬¼à¬¿à¬†' },
  { code: 'as', name: 'Assamese', nativeName: 'à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾' },
  { code: 'mr', name: 'Marathi', nativeName: 'à¤®à¤°à¤¾à¤ à¥€' },
  { code: 'ne', name: 'Nepali', nativeName: 'à¤¨à¥‡à¤ªà¤¾à¤²à¥€' },
  { code: 'si', name: 'Sinhala', nativeName: 'à·ƒà·’à¶‚à·„à¶½' },
  { code: 'my', name: 'Myanmar', nativeName: 'á€™á€¼á€”á€ºá€™á€¬' },
  { code: 'km', name: 'Khmer', nativeName: 'ážáŸ’áž˜áŸ‚ážš' },
  { code: 'lo', name: 'Lao', nativeName: 'àº¥àº²àº§' },
  { code: 'ka', name: 'Georgian', nativeName: 'áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜' },
  { code: 'hy', name: 'Armenian', nativeName: 'Õ€Õ¡ÕµÕ¥Ö€Õ¥Õ¶' },
  { code: 'az', name: 'Azerbaijani', nativeName: 'AzÉ™rbaycan' },
  { code: 'kk', name: 'Kazakh', nativeName: 'ÒšÐ°Ð·Ð°Ò›' },
  { code: 'ky', name: 'Kyrgyz', nativeName: 'ÐšÑ‹Ñ€Ð³Ñ‹Ð·' },
  { code: 'uz', name: 'Uzbek', nativeName: 'OÊ»zbek' },
  { code: 'tg', name: 'Tajik', nativeName: 'Ð¢Ð¾Ò·Ð¸ÐºÓ£' },
  { code: 'mn', name: 'Mongolian', nativeName: 'ÐœÐ¾Ð½Ð³Ð¾Ð»' },
  { code: 'bo', name: 'Tibetan', nativeName: 'à½–à½¼à½‘à¼‹à½¡à½²à½‚' },
  { code: 'dz', name: 'Dzongkha', nativeName: 'à½¢à¾«à½¼à½„à¼‹à½' },
  { code: 'am', name: 'Amharic', nativeName: 'áŠ áˆ›áˆ­áŠ›' },
  { code: 'ti', name: 'Tigrinya', nativeName: 'á‰µáŒáˆ­áŠ›' },
  { code: 'om', name: 'Oromo', nativeName: 'Oromoo' },
  { code: 'so', name: 'Somali', nativeName: 'Soomaali' },
  { code: 'sw', name: 'Swahili', nativeName: 'Kiswahili' },
  { code: 'zu', name: 'Zulu', nativeName: 'isiZulu' },
  { code: 'xh', name: 'Xhosa', nativeName: 'isiXhosa' },
  { code: 'af', name: 'Afrikaans', nativeName: 'Afrikaans' },
  { code: 'st', name: 'Sesotho', nativeName: 'Sesotho' },
  { code: 'tn', name: 'Setswana', nativeName: 'Setswana' },
  { code: 'ss', name: 'Swati', nativeName: 'siSwati' },
  { code: 've', name: 'Venda', nativeName: 'Tshivená¸“a' },
  { code: 'ts', name: 'Tsonga', nativeName: 'Xitsonga' },
  { code: 'nr', name: 'Ndebele', nativeName: 'isiNdebele' },
  { code: 'nso', name: 'Northern Sotho', nativeName: 'Sepedi' },
  { code: 'mg', name: 'Malagasy', nativeName: 'Malagasy' },
  { code: 'ny', name: 'Chichewa', nativeName: 'Chichewa' },
  { code: 'sn', name: 'Shona', nativeName: 'chiShona' },
  { code: 'rw', name: 'Kinyarwanda', nativeName: 'Kinyarwanda' },
  { code: 'rn', name: 'Kirundi', nativeName: 'Kirundi' },
  { code: 'lg', name: 'Luganda', nativeName: 'Luganda' },
  { code: 'wo', name: 'Wolof', nativeName: 'Wolof' },
  { code: 'yo', name: 'Yoruba', nativeName: 'YorÃ¹bÃ¡' },
  { code: 'ig', name: 'Igbo', nativeName: 'Igbo' },
  { code: 'ha', name: 'Hausa', nativeName: 'Hausa' },
  { code: 'ff', name: 'Fulah', nativeName: 'Fulfulde' },
  { code: 'bm', name: 'Bambara', nativeName: 'Bamanankan' },
];

// Helper function to validate and normalize locale
const normalizeLocale = (locale: string | undefined): string => {
  if (!locale || typeof locale !== 'string') {
    return 'en';
  }
  
  // Extract language code from locale (e.g., 'en-US' -> 'en')
  const languageCode = locale.split('-')[0].toLowerCase();
  
  // Check if we support this language
  const supportedLanguages = getSupportedLanguageCodes();
  
  return supportedLanguages.includes(languageCode) ? languageCode : 'en';
};

const i18n = new I18n({
  en: {
    // Common
    common: {
      save: 'Save',
      cancel: 'Cancel',
      delete: 'Delete',
      edit: 'Edit',
      add: 'Add',
      remove: 'Remove',
      ok: 'OK',
      yes: 'Yes',
      no: 'No',
      loading: 'Loading...',
      error: 'Error',
      success: 'Success',
      warning: 'Warning',
      emergency: 'Emergency',
      location: 'Location',
      settings: 'Settings',
      profile: 'Profile',
      contacts: 'Contacts',
    },

    // Navigation
    navigation: {
      emergency: 'Emergency',
      private: 'Private',
      shared: 'Shared',
      contacts: 'Contacts',
      location: 'Location',
      settings: 'Settings',
      profile: 'Profile',
      emergencyAccess: 'Emergency Access',
    },

    // Emergency
    emergency: {
      title: 'SafeTravel',
      subtitle: 'Your personal safety companion for secure travel',
      emergencySOS: 'Emergency SOS',
      instruction: 'Press and hold for emergency assistance',
      activating: 'Activating...',
      active: 'Emergency Active',
      endEmergency: 'End Emergency',
      voiceActive: 'ðŸŽ¤ Voice commands active',
      howItWorks: 'How it works:',
      step1: 'Press the emergency button, use voice command, or automatic speed detection',
      step2: 'Your emergency contacts are automatically notified via WhatsApp',
      step3: 'Location tracking starts and photos/videos can be captured',
      step4: 'All data is securely stored and shared with your trusted contacts',
    },

    // Quick Share
    quickShare: {
      shareNow: 'Share Now',
      quickText: 'Quick Text',
      quickPhoto: 'Quick Photo',
      quickVoice: 'Quick Voice',
      addDetails: 'Add Details',
      title: 'Title',
      description: 'Description',
      shareContent: 'Share Content',
      contentShared: 'Content shared successfully!',
      textPlaceholder: 'Type your safety note...',
      titlePlaceholder: 'Enter title (optional)',
      descriptionPlaceholder: 'Add description (optional)',
    },

    // Settings
    settings: {
      title: 'Settings',
      subtitle: 'Configure your safety preferences and emergency settings',
      voiceCommands: 'Voice Commands',
      voiceActivation: 'Voice Activation',
      voiceActivationDesc: 'Enable voice commands to trigger emergency mode',
      voiceCommandPhrase: 'Voice Command Phrase',
      voiceCommandHelp: 'Say this phrase to activate emergency mode',
      recordVoiceCommand: 'Record Voice Command',
      recordVoiceDesc: 'Record your voice for better recognition accuracy',
      mediaCapture: 'Media Capture',
      autoPhotoCapture: 'Auto Photo Capture',
      autoPhotoCaptureDesc: 'Automatically take photos during emergency',
      autoVideoRecording: 'Auto Video Recording',
      autoVideoRecordingDesc: 'Automatically record video during emergency',
      locationPrivacy: 'Location & Privacy',
      locationSharing: 'Location Sharing',
      locationSharingDesc: 'Share your location with emergency contacts',
      dataRetention: 'Data Retention',
      dataRetentionDesc: 'Days to keep emergency data',
      emergencyMode: 'Emergency Mode',
      emergencyModeDesc: 'Enhanced security and reduced functionality',
      appearance: 'Appearance',
      theme: 'Theme',
      themeDesc: 'Choose your preferred theme',
      language: 'Language',
      languageDesc: 'Select your preferred language',
      dataManagement: 'Data Management',
      clearAllData: 'Clear All Data',
      clearDataDesc: 'This will permanently delete all emergency sessions, location data, and media files.',
      clearDataWarning: 'This will permanently delete all emergency sessions, location data, and media. This action cannot be undone.',
      dataCleared: 'All data has been cleared',
    },

    // Themes
    themes: {
      light: 'Light',
      dark: 'Dark',
      system: 'System',
    },

    // Languages
    languages: {
      en: 'English',
      es: 'EspaÃ±ol',
      fr: 'FranÃ§ais',
      de: 'Deutsch',
      it: 'Italiano',
      pt: 'PortuguÃªs',
      ru: 'Ð ÑƒÑÑÐºÐ¸Ð¹',
      zh: 'ä¸­æ–‡',
      ja: 'æ—¥æœ¬èªž',
      ko: 'í•œêµ­ì–´',
      ar: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
      hi: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€',
      th: 'à¹„à¸—à¸¢',
      vi: 'Tiáº¿ng Viá»‡t',
      tr: 'TÃ¼rkÃ§e',
      pl: 'Polski',
      nl: 'Nederlands',
      sv: 'Svenska',
      da: 'Dansk',
      no: 'Norsk',
      fi: 'Suomi',
      he: '×¢×‘×¨×™×ª',
      cs: 'ÄŒeÅ¡tina',
      sk: 'SlovenÄina',
      hu: 'Magyar',
      ro: 'RomÃ¢nÄƒ',
      bg: 'Ð‘ÑŠÐ»Ð³Ð°Ñ€ÑÐºÐ¸',
      hr: 'Hrvatski',
      sr: 'Ð¡Ñ€Ð¿ÑÐºÐ¸',
      sl: 'SlovenÅ¡Äina',
      et: 'Eesti',
      lv: 'LatvieÅ¡u',
      lt: 'LietuviÅ³',
      uk: 'Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°',
      be: 'Ð‘ÐµÐ»Ð°Ñ€ÑƒÑÐºÐ°Ñ',
      mk: 'ÐœÐ°ÐºÐµÐ´Ð¾Ð½ÑÐºÐ¸',
      sq: 'Shqip',
      mt: 'Malti',
      is: 'Ãslenska',
      ga: 'Gaeilge',
      cy: 'Cymraeg',
      eu: 'Euskera',
      ca: 'CatalÃ ',
      gl: 'Galego',
      fa: 'ÙØ§Ø±Ø³ÛŒ',
      ur: 'Ø§Ø±Ø¯Ùˆ',
      bn: 'à¦¬à¦¾à¦‚à¦²à¦¾',
      ta: 'à®¤à®®à®¿à®´à¯',
      te: 'à°¤à±†à°²à±à°—à±',
      ml: 'à´®à´²à´¯à´¾à´³à´‚',
      kn: 'à²•à²¨à³à²¨à²¡',
      gu: 'àª—à«àªœàª°àª¾àª¤à«€',
      pa: 'à¨ªà©°à¨œà¨¾à¨¬à©€',
      or: 'à¬“à¬¡à¬¼à¬¿à¬†',
      as: 'à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾',
      mr: 'à¤®à¤°à¤¾à¤ à¥€',
      ne: 'à¤¨à¥‡à¤ªà¤¾à¤²à¥€',
      si: 'à·ƒà·’à¶‚à·„à¶½',
      my: 'á€™á€¼á€”á€ºá€™á€¬',
      km: 'ážáŸ’áž˜áŸ‚ážš',
      lo: 'àº¥àº²àº§',
      ka: 'áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜',
      hy: 'Õ€Õ¡ÕµÕ¥Ö€Õ¥Õ¶',
      az: 'AzÉ™rbaycan',
      kk: 'ÒšÐ°Ð·Ð°Ò›',
      ky: 'ÐšÑ‹Ñ€Ð³Ñ‹Ð·',
      uz: 'OÊ»zbek',
      tg: 'Ð¢Ð¾Ò·Ð¸ÐºÓ£',
      mn: 'ÐœÐ¾Ð½Ð³Ð¾Ð»',
      bo: 'à½–à½¼à½‘à¼‹à½¡à½²à½‚',
      dz: 'à½¢à¾«à½¼à½„à¼‹à½',
      am: 'áŠ áˆ›áˆ­áŠ›',
      ti: 'á‰µáŒáˆ­áŠ›',
      om: 'Oromoo',
      so: 'Soomaali',
      sw: 'Kiswahili',
      zu: 'isiZulu',
      xh: 'isiXhosa',
      af: 'Afrikaans',
      st: 'Sesotho',
      tn: 'Setswana',
      ss: 'siSwati',
      ve: 'Tshivená¸“a',
      ts: 'Xitsonga',
      nr: 'isiNdebele',
      nso: 'Sepedi',
      mg: 'Malagasy',
      ny: 'Chichewa',
      sn: 'chiShona',
      rw: 'Kinyarwanda',
      rn: 'Kirundi',
      lg: 'Luganda',
      wo: 'Wolof',
      yo: 'YorÃ¹bÃ¡',
      ig: 'Igbo',
      ha: 'Hausa',
      ff: 'Fulfulde',
      bm: 'Bamanankan',
    },

    // Contacts
    contacts: {
      title: 'Emergency Contacts',
      subtitle: 'Manage your trusted contacts for emergency situations',
      searchPlaceholder: 'Search contacts...',
      addFirstContact: 'Add Your First Contact',
      noContacts: 'No emergency contacts added yet',
      noContactsFound: 'No contacts found',
      addContact: 'Add Emergency Contact',
      editContact: 'Edit Contact',
      name: 'Name',
      phone: 'Phone',
      email: 'Email',
      whatsapp: 'WhatsApp Number',
      relationship: 'Relationship',
      primaryContact: 'Primary contact',
      countryCode: 'Country Code',
      phoneNumber: 'Phone Number',
      required: 'Required',
      optional: 'Optional',
      relationshipPlaceholder: 'e.g., Mother, Partner, Friend',
      fillAllFields: 'Please fill in all required fields',
      contactSaved: 'Contact saved successfully',
      deleteContact: 'Delete Contact',
      deleteContactConfirm: 'Are you sure you want to delete this emergency contact?',
    },
  },

  es: {
    // Common
    common: {
      save: 'Guardar',
      cancel: 'Cancelar',
      delete: 'Eliminar',
      edit: 'Editar',
      add: 'Agregar',
      remove: 'Quitar',
      ok: 'OK',
      yes: 'SÃ­',
      no: 'No',
      loading: 'Cargando...',
      error: 'Error',
      success: 'Ã‰xito',
      warning: 'Advertencia',
      emergency: 'Emergencia',
      location: 'UbicaciÃ³n',
      settings: 'ConfiguraciÃ³n',
      profile: 'Perfil',
      contacts: 'Contactos',
    },

    // Navigation
    navigation: {
      emergency: 'Emergencia',
      private: 'Privado',
      shared: 'Compartido',
      contacts: 'Contactos',
      location: 'UbicaciÃ³n',
      settings: 'ConfiguraciÃ³n',
      profile: 'Perfil',
      emergencyAccess: 'Acceso de Emergencia',
    },

    // Emergency
    emergency: {
      title: 'SafeTravel',
      subtitle: 'Tu compaÃ±ero personal de seguridad para viajes seguros',
      emergencySOS: 'SOS de Emergencia',
      instruction: 'MantÃ©n presionado para asistencia de emergencia',
      activating: 'Activando...',
      active: 'Emergencia Activa',
      endEmergency: 'Terminar Emergencia',
      voiceActive: 'ðŸŽ¤ Comandos de voz activos',
      howItWorks: 'CÃ³mo funciona:',
      step1: 'Presiona el botÃ³n de emergencia, usa comando de voz o detecciÃ³n automÃ¡tica de velocidad',
      step2: 'Tus contactos de emergencia son notificados automÃ¡ticamente vÃ­a WhatsApp',
      step3: 'El seguimiento de ubicaciÃ³n comienza y se pueden capturar fotos/videos',
      step4: 'Todos los datos se almacenan de forma segura y se comparten con tus contactos de confianza',
    },

    // Quick Share
    quickShare: {
      shareNow: 'Compartir Ahora',
      quickText: 'Texto RÃ¡pido',
      quickPhoto: 'Foto RÃ¡pida',
      quickVoice: 'Voz RÃ¡pida',
      addDetails: 'Agregar Detalles',
      title: 'TÃ­tulo',
      description: 'DescripciÃ³n',
      shareContent: 'Compartir Contenido',
      contentShared: 'Â¡Contenido compartido exitosamente!',
      textPlaceholder: 'Escribe tu nota de seguridad...',
      titlePlaceholder: 'Ingresa tÃ­tulo (opcional)',
      descriptionPlaceholder: 'Agregar descripciÃ³n (opcional)',
    },

    // Settings
    settings: {
      title: 'ConfiguraciÃ³n',
      subtitle: 'Configura tus preferencias de seguridad y configuraciÃ³n de emergencia',
      voiceCommands: 'Comandos de Voz',
      voiceActivation: 'ActivaciÃ³n por Voz',
      voiceActivationDesc: 'Habilitar comandos de voz para activar modo de emergencia',
      voiceCommandPhrase: 'Frase de Comando de Voz',
      voiceCommandHelp: 'Di esta frase para activar el modo de emergencia',
      recordVoiceCommand: 'Grabar Comando de Voz',
      recordVoiceDesc: 'Graba tu voz para mejor precisiÃ³n de reconocimiento',
      mediaCapture: 'Captura de Medios',
      autoPhotoCapture: 'Captura AutomÃ¡tica de Fotos',
      autoPhotoCaptureDesc: 'Tomar fotos automÃ¡ticamente durante emergencia',
      autoVideoRecording: 'GrabaciÃ³n AutomÃ¡tica de Video',
      autoVideoRecordingDesc: 'Grabar video automÃ¡ticamente durante emergencia',
      locationPrivacy: 'UbicaciÃ³n y Privacidad',
      locationSharing: 'Compartir UbicaciÃ³n',
      locationSharingDesc: 'Compartir tu ubicaciÃ³n con contactos de emergencia',
      dataRetention: 'RetenciÃ³n de Datos',
      dataRetentionDesc: 'DÃ­as para mantener datos de emergencia',
      emergencyMode: 'Modo de Emergencia',
      emergencyModeDesc: 'Seguridad mejorada y funcionalidad reducida',
      appearance: 'Apariencia',
      theme: 'Tema',
      themeDesc: 'Elige tu tema preferido',
      language: 'Idioma',
      languageDesc: 'Selecciona tu idioma preferido',
      dataManagement: 'GestiÃ³n de Datos',
      clearAllData: 'Borrar Todos los Datos',
      clearDataDesc: 'Esto eliminarÃ¡ permanentemente todas las sesiones de emergencia, datos de ubicaciÃ³n y archivos multimedia.',
      clearDataWarning: 'Esto eliminarÃ¡ permanentemente todas las sesiones de emergencia, datos de ubicaciÃ³n y medios. Esta acciÃ³n no se puede deshacer.',
      dataCleared: 'Todos los datos han sido borrados',
    },

    // Themes
    themes: {
      light: 'Claro',
      dark: 'Oscuro',
      system: 'Sistema',
    },

    // Languages (same as English for now)
    languages: {
      en: 'English',
      es: 'EspaÃ±ol',
      fr: 'FranÃ§ais',
      de: 'Deutsch',
      it: 'Italiano',
      pt: 'PortuguÃªs',
      ru: 'Ð ÑƒÑÑÐºÐ¸Ð¹',
      zh: 'ä¸­æ–‡',
      ja: 'æ—¥æœ¬èªž',
      ko: 'í•œêµ­ì–´',
      ar: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
      hi: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€',
      th: 'à¹„à¸—à¸¢',
      vi: 'Tiáº¿ng Viá»‡t',
      tr: 'TÃ¼rkÃ§e',
      pl: 'Polski',
      nl: 'Nederlands',
      sv: 'Svenska',
      da: 'Dansk',
      no: 'Norsk',
      fi: 'Suomi',
      he: '×¢×‘×¨×™×ª',
      cs: 'ÄŒeÅ¡tina',
      sk: 'SlovenÄina',
      hu: 'Magyar',
      ro: 'RomÃ¢nÄƒ',
      bg: 'Ð‘ÑŠÐ»Ð³Ð°Ñ€ÑÐºÐ¸',
      hr: 'Hrvatski',
      sr: 'Ð¡Ñ€Ð¿ÑÐºÐ¸',
      sl: 'SlovenÅ¡Äina',
      et: 'Eesti',
      lv: 'LatvieÅ¡u',
      lt: 'LietuviÅ³',
      uk: 'Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°',
      be: 'Ð‘ÐµÐ»Ð°Ñ€ÑƒÑÐºÐ°Ñ',
      mk: 'ÐœÐ°ÐºÐµÐ´Ð¾Ð½ÑÐºÐ¸',
      sq: 'Shqip',
      mt: 'Malti',
      is: 'Ãslenska',
      ga: 'Gaeilge',
      cy: 'Cymraeg',
      eu: 'Euskera',
      ca: 'CatalÃ ',
      gl: 'Galego',
      fa: 'ÙØ§Ø±Ø³ÛŒ',
      ur: 'Ø§Ø±Ø¯Ùˆ',
      bn: 'à¦¬à¦¾à¦‚à¦²à¦¾',
      ta: 'à®¤à®®à®¿à®´à¯',
      te: 'à°¤à±†à°²à±à°—à±',
      ml: 'à´®à´²à´¯à´¾à´³à´‚',
      kn: 'à²•à²¨à³à²¨à²¡',
      gu: 'àª—à«àªœàª°àª¾àª¤à«€',
      pa: 'à¨ªà©°à¨œà¨¾à¨¬à©€',
      or: 'à¬“à¬¡à¬¼à¬¿à¬†',
      as: 'à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾',
      mr: 'à¤®à¤°à¤¾à¤ à¥€',
      ne: 'à¤¨à¥‡à¤ªà¤¾à¤²à¥€',
      si: 'à·ƒà·’à¶‚à·„à¶½',
      my: 'á€™á€¼á€”á€ºá€™á€¬',
      km: 'ážáŸ’áž˜áŸ‚ážš',
      lo: 'àº¥àº²àº§',
      ka: 'áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜',
      hy: 'Õ€Õ¡ÕµÕ¥Ö€Õ¥Õ¶',
      az: 'AzÉ™rbaycan',
      kk: 'ÒšÐ°Ð·Ð°Ò›',
      ky: 'ÐšÑ‹Ñ€Ð³Ñ‹Ð·',
      uz: 'OÊ»zbek',
      tg: 'Ð¢Ð¾Ò·Ð¸ÐºÓ£',
      mn: 'ÐœÐ¾Ð½Ð³Ð¾Ð»',
      bo: 'à½–à½¼à½‘à¼‹à½¡à½²à½‚',
      dz: 'à½¢à¾«à½¼à½„à¼‹à½',
      am: 'áŠ áˆ›áˆ­áŠ›',
      ti: 'á‰µáŒáˆ­áŠ›',
      om: 'Oromoo',
      so: 'Soomaali',
      sw: 'Kiswahili',
      zu: 'isiZulu',
      xh: 'isiXhosa',
      af: 'Afrikaans',
      st: 'Sesotho',
      tn: 'Setswana',
      ss: 'siSwati',
      ve: 'Tshivená¸“a',
      ts: 'Xitsonga',
      nr: 'isiNdebele',
      nso: 'Sepedi',
      mg: 'Malagasy',
      ny: 'Chichewa',
      sn: 'chiShona',
      rw: 'Kinyarwanda',
      rn: 'Kirundi',
      lg: 'Luganda',
      wo: 'Wolof',
      yo: 'YorÃ¹bÃ¡',
      ig: 'Igbo',
      ha: 'Hausa',
      ff: 'Fulfulde',
      bm: 'Bamanankan',
    },

    // Contacts
    contacts: {
      title: 'Contactos de Emergencia',
      subtitle: 'Gestiona tus contactos de confianza para situaciones de emergencia',
      searchPlaceholder: 'Buscar contactos...',
      addFirstContact: 'Agregar Tu Primer Contacto',
      noContacts: 'No se han agregado contactos de emergencia aÃºn',
      noContactsFound: 'No se encontraron contactos',
      addContact: 'Agregar Contacto de Emergencia',
      editContact: 'Editar Contacto',
      name: 'Nombre',
      phone: 'TelÃ©fono',
      email: 'Email',
      whatsapp: 'NÃºmero de WhatsApp',
      relationship: 'RelaciÃ³n',
      primaryContact: 'Contacto principal',
      countryCode: 'CÃ³digo de PaÃ­s',
      phoneNumber: 'NÃºmero de TelÃ©fono',
      required: 'Requerido',
      optional: 'Opcional',
      relationshipPlaceholder: 'ej., Madre, Pareja, Amigo',
      fillAllFields: 'Por favor completa todos los campos requeridos',
      contactSaved: 'Contacto guardado exitosamente',
      deleteContact: 'Eliminar Contacto',
      deleteContactConfirm: 'Â¿EstÃ¡s seguro de que quieres eliminar este contacto de emergencia?',
    },
  },

  // Add more languages as needed...
});

// When a value is missing from a language it'll fall back to another language with the key present
i18n.enableFallback = true;
i18n.defaultLocale = 'en';

export default i18n;

export const initializeI18n = async () => {
  try {
    const savedLanguage = await StorageService.getLanguage();
    if (savedLanguage && typeof savedLanguage === 'string') {
      const normalizedLanguage = normalizeLocale(savedLanguage);
      i18n.locale = normalizedLanguage;
    } else {
      // Set initial locale from device if no saved language
      const deviceLocale = Localization.locale || Localization.getLocales()?.[0]?.languageCode;
      i18n.locale = normalizeLocale(deviceLocale);
    }
  } catch (error) {
    console.error('Error loading saved language:', error);
    // Ensure we always have a valid locale
    i18n.locale = 'en';
  }
};

export const setLanguage = async (language: string) => {
  const normalizedLanguage = normalizeLocale(language);
  i18n.locale = normalizedLanguage;
  try {
    await StorageService.saveLanguage(normalizedLanguage);
  } catch (error) {
    console.error('Error saving language:', error);
  }
};

export const getCurrentLanguage = () => i18n.locale || 'en';
